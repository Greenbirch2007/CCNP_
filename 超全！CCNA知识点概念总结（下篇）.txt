超全！CCNA知识点概念总结（下篇）



第四部分：路由选择协议
协议就是基于多个标准的一组规则， 它确定计算机如何穿越网络进行通信。 协议描述了以下内容：消息必须使用的格式在某个特定活动中，计算机交换消息所必须使用的方式，比如穿越网络发送消息。

被路由协议：任何在网络层地址中提供足够信息，是分组能根据寻址方案，从一台 PC 转发到另一台 PC 的网络协议。被路由协议就是被路由选择协议路由的协议，它是被动的，它定义了分组中字段的格式，它使用路由选择表来发转发分组，被路由协议包括：IP、 IPX 、AppleTalk 、Digital DECnet。

路由选择协议： 通过提供共享路由选择表信息的机制来支持被路由协议， 路由协议的消息在路由器之间传送。TCP/IP 路由选择协议包括：RIP、 OSPF、 IGRP、 EIGRP 。

路由器的两项关键功能：维护路由选择表并确保其他路由器知道网络拓扑的变化、当分组到达一个接口时，路由器必须是哟个路由选择表来确定向哪里发送分组。

路由选择协议度量值用于确定路由优良的值，使用各种标准组合来确定路由选择度量值， 有跳数、带宽、延迟、可靠性、负载、成本。

RIP：距离矢量路由选择协议，IGP，用跳数来衡量度量值，周期性的每 30 秒发送器全部路由表给相邻的邻居路由器，即使网络中没有更新变化发生液会周期性的发送更新，因此收敛速度比较慢。 

RIP 有两个版本 RIPv2 在 RIPv1 版本基础上进一步支持了 CIDR 、 VLSM 、支持 MD5 、明文身份验证、使用组播地址传送路由选择更新。RIP 使用水平分割、抑制定时器、触发更新方式来防止路由选择环路，16 跳作为无穷大的能量值，认为不可达。

IGRP：距离矢量路由选择协议， IGP，思科私有路由选择协议，默认用贷款和延迟来计算度量值，比 RIP 支持更多的跳数，故此支持更大的网络环境； 

EIGRP：IGRP 的增强版本，采用DUAL算法，收敛速度极快， 通过发送增量的更新，对带宽提供高效的利用，支持 CIDR 、VLSM ，还能通过PDM模块，对多种网络层进行支持，如 IP、IPX 、AppleTalk 。EIGRP 也使用最大跳数，其值为 224、IGRP 为 255，而RIP是 15。

EIGRP在IGRP和EIGRP之间共享或重新分配的信息时自动的，只要两者使用相同的自治系统号。EIGRP 中邻居表是其最重要的表，每台 EIGRP 路由器维护一个列出毗邻路由器的邻居表，与OSPF的邻居表类似。

拓扑表由自治系统中所有的 EIGRP 路由选择表构成，拓扑表包括：可行距离 FD= 到每一个目的地的最低计算度量值、报告距离 RD= 毗邻的邻居报告的到一个指定目的地的距离、接口信息、路由来源和路由状态。路由状态可标识为 P=被动的、 A= 活跃的。

后继：指被选中作为到达一个目的地所使用的主要路由的路由可行后继 FS：是一条备份路由EIGRP 主动的建议邻居关系， 使用更小的 hello 分组， 缺省没 5s 发送一次， 与邻居建立毗邻关系。
OSPF是一种链路状态路由选择协议，通过发送 hello 分组来建议邻居关系，更适合大规模的网络。

OSPF 支持广播型多路访问、费广播型多路访问 NBMA 、点到点网络。OSPF 路由器进入two-way 后，根据网络类型决定选举或不选举 DR 、BDR OSPF 通过 5 种不同种类的分组来识别它们邻居并更新链路状态信息：

· Hello ：与邻居建立和维护毗邻关系的分组

· 数据描述分组 DBD ：描述一个 OSPF 链路状态数据库的内容

· 链路状态请求分组 LSR：请求相邻路由器发送其链路状态数据库中的特定项

· 链路状态更新 LSU ：向邻居路由器发送链路状态通告链路状态确认 LSACK ：确认收到了邻居的 LSA OSPF 的接口可能处于下列 7 种状态之一：

· DOWN ：物理 down，OSPF 进程还没有与任何邻居交换信息

· Int ：初始状态，以固定的时间间隔发送 hello 分组，与邻居建议关系。

· Two-Way ：双向状态，每台 OSPF 路由器都试图与统一 IP 网络中的所有邻居建立 two-way状态。

· ExStart：准启动

· Exchange：交换，在此状态下，邻居路由器使用 DBD 分组来相互发送他们的链路状态信息

· Loading ：加载，在相互描述过自己的链路状态数据库后，路由器使用 LSR 请求更完整的信息

· Full Adjacency ：全毗邻，加载结束后，路由器变成全毗邻状态，每台路由器都保存一张毗邻路由器列表 =毗邻数据库。

IS-IS 中间系统到中间系统

该协议是 OSI 协议栈中的动态链路状态路由协议， 因此它负责在 ISO 无连接网络服务 CLNS环境下，为无连接网络协议 CLNP 的数据分发路由选择信息。集成式 IS-IS 也是 IS-IS 的一种实现方式， 能完成对多种网络协议的路由选择。集成式 IS-IS 为 CLNP 路由标记上关于 IP网络和子网的信息。

BGP 边界网关协议

是外部网关协议 EGP 的一个例子， BGP 在自主系统之间交换路由选择信息，同时保证无环路的路由选择，该协议是因特网上大公司和运营商使用的首要路由协议， BGP 基于网络策略来作为度量值标准，使用不同的 BGP 路径属性来法定路径选择。

比较距离矢量、链路状态、混合路由选择协议

链路状态路由选择协议设计用于客服距离矢量协议的局限性， 链路状态路由选择协议对网络变化能做出迅速反应，只在有变化时才触发更新，并以很长的时间间隔，发送周期性更新。

第五部分：广域网协议

广域网协议与服务主要包括：PPP、HDLC 、Frame-relay 、ISDN/LAPD 、LAPB 、ISDN DDR 。

HDLC：HDLC 分为标准的和思科专有的，思科设备默认的封装是 HDLC 。HDLC 成帧方式设计用于在不可靠的线路上提供可靠的传输， 包括了用于流量和差错控制的信令机制， 帧总是以一个 8 比特的标识字段开始和结束，该字段比特模式为 01111110。由 HDLC 派生的协议有 X.25 使用的平衡时链路接入过程 LAPB 、ISDN 使用的 D 信道链路接入过程 LAPD 等。

PPP：PPP使用分层体系结构，使用了 OSI 模型中的 3 层，物理层定义了用来实际的点到点连接，数据链路层的链路控制协议 LCP 用来建立和配置连接，网络层的网络控制协议 NCP用来配置不同的网络协议。PPP支持身份验证，提供两种验证方式：PAP、 CHAP ， PAP 为密码验证， CHAP 为咨询握手验证协议，使用 3 次握手机制， CHAP 使用 MD5 产生哈希函数来加密密码，安全性更高。

ISDN ：综合业务数字网

目前使用 ISDN 的用户主要用于广域网备份、向远程办公者和小型企业办公室提供远程接入，它不像 DSL 技术那样将数字信号转换成模拟再进行传输，它直接传输数字信号。

ISDN 的两种接口：BRI 、 PRI

BRI ：2B+D 2 个 64kbit/s 的 B 信道和一个 16kbit/s的D信道
PRI：北美 23B+D、欧洲、澳大利亚和世界上其他地区 30B+D，前者等同于 T1，后者等同于 E1。

ISDN 也有一个三层模型， 物理层定义了接口规范， 数据两路层的LAPD协议定义D信道的控制信息和信令能够正确发送和接收。网络层使用 Q.931 来定义 B 信道的传输。ISDN 还定义了不同功能的参考点，比如非 ISDN 终端设备 TE2、 ISDN 终端设备 TE1 、 TE1 与客户端交换设备 NT2 、本地环路终结器 NT1 。

其中参考点定义了设备连接间的接口标准：

R：非 ISDN 设备与终端适配器 TA 的连接点
S：连接到用户交换设备 NT2 上的参考点
T：其电子特征和 S 接口相同
U：连接到 ISDN 中心网络交换机的参考点

Frame-relay

帧中继技术由 X.25 网络演变而来，由于其在光线介质上传输，去除了差错、流量控制，比X.25 提供更高的速率。帧中继是一个公共网络，在一条线路上进行传输的不止自己公司的数据，是一种廉价的解决方案。

帧中继的术语包括：

· DLCI ：数据链路标识符，它是源和目的设备之间的表示逻辑电路的一个数值，一般由 ISP分配。

· LMI ：本地管理接口，它是用户端设备 CPE 和帧中继交换机之间的信令标准，负责管理设备间的连接、维护设备间的连接状态。

· CIR ：承诺信息速率，服务提供商提承诺提供的最大数据量

· PVC ：由运营商配置的永久式虚电路

· SVC ：在有数据发送时才产生的交换式虚电路，在没有数据时会自动断开

第六部分 扩展 IP 地址

NAT

网络地址转换， 缓解因特网 IP 地址不足， 保护内网数据安全。NAT 分为静态、 动态和 PAT(端口复用 )。静态为内网地址与外网地址一对一转换，动态需要分配地址池， 端口复用使用一个 IP 地址，不同的端口号， 将内网 IP 转换成公网 IP。

BOOTP 、 DHCP

BOOTP 、DHCP都是自动为客户端PC分配IP地址，但BOOTP 与 DHCP 最大的不同是，BOOTP 不是动态的，他通过事先定义条目，而 DHCP 提供动态分配机制，该机制循序客户端分配一个具有有限租期的 IP 地址。

第七部分 ACL

ACL

访问控制列表，它提供以一种安全机制，通过定义一连串的规则来允许或禁止某些符合这规则的特性通过路由器。分为标准、扩展、命名 ACL 。

标准 ACL 根据源地址进行控制，扩展 ACL 根据源地址、目的地址、源 TCP/UDP 端口号、目的端口号、协议进行控制。命名 ACL 提供了以个便捷之处，它允许在 ACL 条目创建后删除某条语句， 如果基于代码的 ACL 将删除基于该代码的所有语句。一般情况下，定义标准 ACL 都是应用在离源出口最近，扩展 ACL 离目标最近。

第八部分 Cisco 设备、IOS 和网络基础

当我们第一次对路由器或交换机等设备进行配置之前，通常都会对该设备现有的 IOS 进行备份，那么将会用到 cisco 的 TFTP 软件，也可以将运行中的配置拷贝到 TFTP 服务器，在使用超级终端时，可以对配置文件进行管理，通过依次点击超级终端界面的传送、捕获文字、指定捕获文件的文本名称、点击开始，然后在设备中输入 sh run，最后在界面中点击停止就可以对配置文件进行拷贝到文本中，在文本中去掉不必要的文字，以备日后将配置文件拷贝到设备中。

思科路由器、交换机具备丰富的命令行帮助特性。

shw version 命令可以查看设备的：

1.IOS 版本信息
2.自举 ROM 版本
3.启动 ROM 版本
4.设备正常运行时间
5.上次重新启动的方式
6.系统映像文件和位置
7.设备的平台
8.配置寄存器的值